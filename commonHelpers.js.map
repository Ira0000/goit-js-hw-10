{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["//add libraries\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate;\nlet dateDiff;\n\nconst inputDateField = document.querySelector('input#datetime-picker');\nconst startButton = document.querySelector('.data-start-btn');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    let currentDate = new Date();\n\n    if (userSelectedDate.getTime() - currentDate.getTime() > 0) {\n      buttonEnabled();\n    } else {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n        backgroundColor: '#B51B1B',\n        messageColor: '#fff',\n      });\n      buttonDisabled();\n    }\n  },\n};\n\nlet timer = flatpickr(inputDateField, options);\n\nfunction buttonDisabled() {\n  startButton.disabled = true;\n  inputDateField.classList.add('input-disabled');\n  return;\n}\n\nfunction buttonEnabled() {\n  inputDateField.classList.remove('input-disabled');\n  startButton.disabled = false;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n\nfunction updateTimer(days, hours, minutes, seconds) {\n  const timerDaysField = document.querySelector('.value[data-days]');\n  const timerHoursField = document.querySelector('.value[data-hours]');\n  const timerMinutesField = document.querySelector('.value[data-minutes]');\n  const timerSecondsField = document.querySelector('.value[data-seconds]');\n\n  timerDaysField.textContent = days;\n  timerHoursField.textContent = addLeadingZero(hours);\n  timerMinutesField.textContent = addLeadingZero(minutes);\n  timerSecondsField.textContent = addLeadingZero(seconds);\n}\n\nfunction startTimer() {\n  buttonDisabled();\n  inputDateField.disabled = true;\n\n  intervalTimer = setInterval(() => {\n    const now = new Date();\n\n    dateDiff = userSelectedDate.getTime() - now.getTime();\n\n    if (dateDiff <= 0) {\n      clearInterval(intervalTimer);\n      inputDateField.disabled = false;\n      iziToast.success({\n        title: 'OK',\n        message: 'Time is up!',\n        position: 'topRight',\n      });\n    } else {\n      const { days, hours, minutes, seconds } = convertMs(dateDiff);\n      console.log({ days, hours, minutes, seconds });\n      updateTimer(days, hours, minutes, seconds);\n    }\n  }, 1000);\n}\n\nstartButton.addEventListener('click', startTimer);\n"],"names":["userSelectedDate","dateDiff","inputDateField","startButton","options","selectedDates","currentDate","buttonEnabled","iziToast","buttonDisabled","flatpickr","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","updateTimer","timerDaysField","timerHoursField","timerMinutesField","timerSecondsField","startTimer","now"],"mappings":"+IAOA,IAAIA,EACAC,EAEJ,MAAMC,EAAiB,SAAS,cAAc,uBAAuB,EAC/DC,EAAc,SAAS,cAAc,iBAAiB,EAEtDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACrBL,EAAmBK,EAAc,CAAC,EAClC,IAAIC,EAAc,IAAI,KAElBN,EAAiB,QAAS,EAAGM,EAAY,QAAO,EAAK,EACvDC,KAEAC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,WACV,gBAAiB,UACjB,aAAc,MACtB,CAAO,EACDC,IAEH,CACH,EAEYC,EAAUR,EAAgBE,CAAO,EAE7C,SAASK,GAAiB,CACxBN,EAAY,SAAW,GACvBD,EAAe,UAAU,IAAI,gBAAgB,CAE/C,CAEA,SAASK,GAAgB,CACvBL,EAAe,UAAU,OAAO,gBAAgB,EAChDC,EAAY,SAAW,EACzB,CAEA,SAASQ,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASC,EAAYN,EAAMC,EAAOC,EAASC,EAAS,CAClD,MAAMI,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAkB,SAAS,cAAc,oBAAoB,EAC7DC,EAAoB,SAAS,cAAc,sBAAsB,EACjEC,EAAoB,SAAS,cAAc,sBAAsB,EAEvEH,EAAe,YAAcP,EAC7BQ,EAAgB,YAAcJ,EAAeH,CAAK,EAClDQ,EAAkB,YAAcL,EAAeF,CAAO,EACtDQ,EAAkB,YAAcN,EAAeD,CAAO,CACxD,CAEA,SAASQ,GAAa,CACpBf,IACAP,EAAe,SAAW,GAE1B,cAAgB,YAAY,IAAM,CAChC,MAAMuB,EAAM,IAAI,KAIhB,GAFAxB,EAAWD,EAAiB,QAAS,EAAGyB,EAAI,QAAO,EAE/CxB,GAAY,EACd,cAAc,aAAa,EAC3BC,EAAe,SAAW,GAC1BM,EAAS,QAAQ,CACf,MAAO,KACP,QAAS,cACT,SAAU,UAClB,CAAO,MACI,CACL,KAAM,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUV,CAAQ,EAC5D,QAAQ,IAAI,CAAE,KAAAY,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAAE,EAC7CG,EAAYN,EAAMC,EAAOC,EAASC,CAAO,CAC1C,CACF,EAAE,GAAI,CACT,CAEAb,EAAY,iBAAiB,QAASqB,CAAU"}